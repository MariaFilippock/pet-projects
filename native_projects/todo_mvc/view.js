import{FILTER_TYPE,ROWS_PER_PAGE}from"./const.js";export class View{constructor(){this.root=document.getElementById("root")}_attachHTMLElements(){this.form=document.getElementById("form-input"),this.input=document.querySelector(".search-input"),this.list=document.querySelector(".todos-container"),this.pages=document.querySelector(".container-pages"),this.filters=document.querySelector(".filters-container")}get _todoTask(){return this.input.value}_clearInput(){this.input.value=""}initAddTaskHandler(t){this.form.addEventListener("submit",e=>{e.preventDefault(),this._todoTask&&(t(this._todoTask),this._clearInput())})}initSetFilter(t){this.filters.addEventListener("click",e=>{e.target.id&&t(e.target.id)})}getId(t,e){const i=t.target.closest("li");i&&e(Number(i.id))}initRemoveTaskHandler(t){this.list.addEventListener("click",e=>{"delete"===e.target.dataset.action&&this.getId(e,t)})}initCompleteTaskHandler(t){this.list.addEventListener("click",e=>{"completed"===e.target.dataset.action&&this.getId(e,t)})}initAddToFavoriteTaskHandler(t){this.list.addEventListener("click",e=>{"favorites"===e.target.dataset.action&&this.getId(e,t)})}renderPagination(t,e,i){let n=Math.ceil(e.length/ROWS_PER_PAGE);this.pages.addEventListener("click",t=>{"BUTTON"===t.target.tagName&&i(Number(t.target.id))});let a="";for(let s=0;s<n;s++)a+=`<button class="${t.currentPage===s+1?"currentPage page-btn":"page-btn"}" id="${s+1}">\n          ${s+1}\n        </button>`;this.pages.innerHTML=a}renderFilters(t){this.filters.innerHTML=`\n            <div id=${FILTER_TYPE.all} class="${t===FILTER_TYPE.all?"all active":FILTER_TYPE.all}">\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438</div>\n                <div id=${FILTER_TYPE.complete} class="${t===FILTER_TYPE.complete?"complete active":FILTER_TYPE.complete}">\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435</div>\n                <div id=${FILTER_TYPE.favorite} class="${t===FILTER_TYPE.favorite?"favorite active":FILTER_TYPE.favorite}">\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435</div>\n            `}renderTodoList(t){let e="";t.length>0&&t.forEach(t=>{e+=`\n                    <li id=${t.id}>\n                        <span class="${t.completed?"completed":""}">${t.text}</span>\n                        <div class="todo-buttons">\n                            <button data-action="favorites" class="${t.isFavorite?"favorite-task":""}">\u2605</button>\n                            <button data-action="completed" class="${t.completed?"completed-task":""}">\u2714</button>\n                            <button data-action="delete">\u2716</button>\n                        </div>\n                    </li>`}),this.list.innerHTML=e}renderApp(){this.root.innerHTML='\n            <h1>TODO APP</h1>\n            <div class="container">\n                 <form id="form-input" class="form">\n                      <input type="text" class="search-input" placeholder="\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443..." />\n                      <button class="add-button" type="submit">\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c</button>\n                 </form>\n                 <div class="filters-container"></div>\n                 <div class="todos-container"></div>\n                 <div class="container-pages"></div>\n            </div>',this._attachHTMLElements()}}