import{Store}from"../../../store.js";import{getHTMLElements}from"../../../controller.js";import{MAX_ELEMENT_NUMBER,PERSON_PROFESSION_TYPE}from"../../../const.js";function showAge(e){return Number(e)>0?e.toFixed(0):"0"}function showInfo(e){return e||""}function countHoursAndMinutes(e,t){const i=Math.floor(e/60);return e&&i>=1?`${e} \u043c\u0438\u043d. / ${`${i} \u0447 ${e-60*i} \u043c\u0438\u043d`}`:e&&i<1?`${e} \u043c\u0438\u043d.`:t?`${t} \u043c\u0438\u043d.`:"0 \u043c\u0438\u043d."}export function renderMovieCard(){const e=getHTMLElements().wrapper;if(!e||!Store.state.movie.idMovie)return;const t=Store.getSelectedTrailerUrl();e.innerHTML=`\n    <div class = "wrapper-join-column">\n        <div class = "wrapper-join-row">\n            <div class="wrapper-col-1">\n                <img src="${Store.state.movie.poster}" alt="${Store.state.movie.name} ${Store.state.movie.year}" >\n            </div>\n            <div class="wrapper-col-2">\n                ${createFavoritesBtn()}\n                <h1 class="title">${Store.state.movie.name} (${Store.state.movie.year})</h1>\n                <h6 class="subtitle">${showInfo(Store.state.movie.alternativeName)} ${showAge(Store.state.movie.ageRating)}+</h6>\n                <p class="description">${showInfo(Store.state.movie.shortDescription)}</p>\n\n               <div class="mb-40">\n                     <a href="#" class="btn" id = "watch-btn">\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c</a>\n                </div>\n\n                <ul class="params mb-40">\n                    <li><span class="text-muted">\u0424\u043e\u0440\u043c\u0430\u0442 </span> ${Store.state.movie.isSerial?"\u0421\u0435\u0440\u0438\u0430\u043b":"\u0424\u0438\u043b\u044c\u043c"}</li>\n                    <li><span class="text-muted">\u0410\u0443\u0434\u0438\u043e\u0434\u043e\u0440\u043e\u0436\u043a\u0438 </span>\u0420\u0443\u0441\u0441\u043a\u0438\u0439</li>\n                    <li><span class="text-muted">\u0412\u043e\u0437\u0440\u0430\u0441\u0442 </span><span><span class="tag">${showAge(Store.state.movie.ageRating)}+</span></span></li>\n                </ul>\n\n                <h2>\u041e \u0444\u0438\u043b\u044c\u043c\u0435</h2>\n\n                <ul class="params">\n                    <li><span class="text-muted">\u0413\u043e\u0434 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 </span>${Store.state.movie.year}</li>\n                    <li><span class="text-muted">\u0421\u0442\u0440\u0430\u043d\u0430 </span>${Store.state.movie.countryName}</li>\n                    <li><span class="text-muted">\u0416\u0430\u043d\u0440 </span>\n                    <span class="genres-list" id = "genres-list">${createGenresHTML()}</span>\n                    </li>\n                    <li>\n                        <span class="text-muted">\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c </span>\n                        <time class="text-muted">${countHoursAndMinutes(Store.state.movie.movieLength,Store.state.movie.seriesLength)}</time>\n                    </li>\n                    <li><span class="text-muted">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 </span>${Store.state.movie.description}</li>\n               </ul>\n            </div>\n        </div>\n        <div class="wrapper-actors-container">\n                <h3 class="actors-title">\u0412 \u0433\u043b\u0430\u0432\u043d\u044b\u0445 \u0440\u043e\u043b\u044f\u0445</h3>\n                ${createActorsList()}\n        </div>\n        \n        <div class="kinobox_player">\n            ${t?`  \n            ${createPlayerSelectField()}<iframe id = "iframe-player" src="${t}" width="100%" height="800px" style = "border: none; border-radius: 3px;"></iframe>`:'<div class = "video-is-undefined">\u0412\u0438\u0434\u0435\u043e\u043f\u043b\u0435\u0435\u0440 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442</div>'}\n        </div>\n        \n        ${Store.state.movie.similarMovies?`<div id="similar-movies-container" class="similar-movies-container">\n            <h3 class="similar-movie-title">\u041f\u043e\u0445\u043e\u0436\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u044b</h3>\n            ${createSimilarMoviesList()}\n        </div>`:""}\n    </div>\n\n    <div class="wrapper-col-3">\n        <div class="rating-container">\n            <span class="rating-main">${Store.state.movie.ratingKp.toFixed(1)}</span>\n            <span class="rating-counts">${Store.state.movie.votesKp.toLocaleString()} \u043e\u0446\u0435\u043d\u043a\u0438</span>\n             <a href="#" class="rating-details">${Store.state.movie.filmCritics} \u0440\u0435\u0446\u0435\u043d\u0437\u0438\u0439</a>\n        </div>\n            \n        ${Store.state.movie.sequelsAndPrequels?.length>0?`<div id="sequels-and-prequels-container" class="sequels-and-prequels-container">\n            <h4 class="sequel-title">\u0421\u0438\u043a\u0432\u0435\u043b\u044b \u0438 \u043f\u0440\u0438\u043a\u0432\u0435\u043b\u044b</h4>${createSequelsAndPrequelsList()}\n        </div>`:""}\n\n        <h4 class = "favorites-title"> \u041c\u043e\u0435 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435 </h4>   \n        ${createFavoriteMovieList()}\n    </div>`}function createGenresHTML(){return Store.state.movie.genres.map(e=>`<a id = "${e.name}">${e.name}</a>`).join(",  ")}function createPlayerSelectField(){return`<select id = "select-player">${Store.state.movie.trailers.map(e=>`<option id = "${e.url}"  ${e.url===Store.state.movie.selectedTrailer.url?"selected":""} >${e.name}</option>`).join(" ")}</select>`}function createFavoriteMovieList(){return`<div id="favorites-list">${Store.state.favoritesMovieList.map(e=>`<div class = "favorite-movie-item" id = "${e.idMovie}">\n                    <img alt="poster" id = "favorite-movie-poster" src = "${e.poster}"> \n                    <div class="favorite-movie-name">${e.name}</div>\n                </div>`).join(" ")}</div>`}function createFavoritesBtn(){return`<div id = "add-to-favorites"> \n                <span>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435</span> \n                <span id = "favorites-img"><ion-icon name="${Store.isFavoriteMovie()?"heart":"heart-outline"}"></ion-icon></span>\n             </div>`}function createActorsList(){return`<div id="actor-list">${Store.state.movie.persons.filter(e=>e.enProfession===PERSON_PROFESSION_TYPE.actor&&e.name).map(e=>`<div class="actor-item" id="${e.id}">\n                    <img alt="photo" class="actor-photo" src="${e.photo}" />\n                    <div class="actor-name">${e.name}</div>\n                </div>`).slice(0,MAX_ELEMENT_NUMBER).join(" ")}</div>`}function createSequelsAndPrequelsList(){return Store.state.movie.sequelsAndPrequels.map(e=>`<div id="${e.id}" class="sequel-prequel-item">\n                    <img alt="poster" class="sequel-prequel-poster" src="${e.poster.url}" />\n                    <div class="sequel-prequel-name">${e.name}</div>\n                </div>`).join(" ")}function createSimilarMoviesList(){return`<div id="similar-movie-list">${Store.state.movie.similarMovies.map(e=>`<div id="${e.id}" class="similar-movie-item">\n                    <img alt="similar-movie" class="similar-movie-poster" src="${e.poster.url}" />\n                    <div class="similar-movie-name">${e.name}</div>\n                </div>`).slice(0,MAX_ELEMENT_NUMBER).join(" ")}</div>`}