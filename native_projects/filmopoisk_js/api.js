import{EVERY_YEAR}from"./const.js";import{MockApiClient}from"./api_mock.js";const headers={"X-API-KEY":"61WD0E0-9P9MS93-JT98B6D-YA058KJ"};let counter=0;export class BackendApiClient{static getMoviesByFirstLetters=(e,t=1,i=30)=>{counter++;const s=counter;return fetch(`https://api.kinopoisk.dev/v1.4/movie/search?query=${e}&limit=${i}&page=${t}`,{headers:headers}).then(e=>{if(counter===s)return e.json()})};static fetchMovie=(e,t,i=14)=>{const s={page:t,limit:i,"genres.name":e.genre,type:e.type,"rating.kp":"6-10",selectFields:""};e.year!==EVERY_YEAR&&(s.year=Number(e.year));const r=new URLSearchParams(s);["votes.filmCritics","name","description","poster.url","alternativeName","videos.trailers.url","similarMovies.id"].forEach(e=>r.append("notNullFields",e));const o="https://api.kinopoisk.dev/v1.4/movie?"+r.toString();return fetch(o,{headers:headers}).then(e=>e.json())};static fetchRandomMovies=(e,t=14)=>{const i=new URLSearchParams({page:e,limit:t,selectFields:"","rating.kp":"8-10","rating.imdb":"8-10","votes.filmCritics":"1-6666666"});["votes.filmCritics","name","description","poster.url","top250","alternativeName"].forEach(e=>i.append("notNullFields",e));const s="https://api.kinopoisk.dev/v1.4/movie?"+i.toString();return fetch(s,{headers:headers}).then(e=>e.json())};static getMoviesById=e=>fetch(`https://api.kinopoisk.dev/v1.4/movie/${e}`,{headers:headers}).then(e=>e.json())}const IS_MOCK_API=!1;export const ApiClient=BackendApiClient;