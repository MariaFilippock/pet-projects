import{EVERY_YEAR,LOCAL_STORAGE_APP_STATE_KEY,MIN_RATING_KP,PAGE_TYPE,START_YEAR}from"./const.js";const Store={state:{movie:{},error:"",isLoadedListVisible:!1,loadedList:[],favoritesMovieList:[],pageType:PAGE_TYPE.StartList,moviesList:[],sideBarFilter:{genre:"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f",type:"movie",year:EVERY_YEAR},isLoading:!1,pagination:{chosenPage:1,pages:1}},GENRES_MAP:{adventure:"\u043f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f",cartoons:"\u043c\u0443\u043b\u044c\u0442\u0444\u0438\u043b\u044c\u043c",fantasy:"\u0444\u0430\u043d\u0442\u0430\u0441\u0442\u0438\u043a\u0430",criminal:"\u043a\u0440\u0438\u043c\u0438\u043d\u0430\u043b",thriller:"\u0442\u0440\u0438\u043b\u043b\u0435\u0440",detective:"\u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0432",drama:"\u0434\u0440\u0430\u043c\u0430",comedy:"\u043a\u043e\u043c\u0435\u0434\u0438\u044f",horror:"\u0443\u0436\u0430\u0441\u044b",action:"\u0431\u043e\u0435\u0432\u0438\u043a",sport:"\u0441\u043f\u043e\u0440\u0442",shortFilm:"\u043a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0430"},FILM_TYPES:[{id:"movie",text:"\u0444\u0438\u043b\u044c\u043c\u044b",icon:"film-outline"},{id:"tv-series",text:"\u0441\u0435\u0440\u0438\u0430\u043b\u044b",icon:"videocam-outline"},{id:"cartoon",text:"\u043c\u0443\u043b\u044c\u0442\u0438\u0444\u0438\u043b\u044c\u043c\u044b",icon:"color-palette-outline"}],years:getYearsArray(),setListOfMovies:function(e){this.state.loadedList=e.filter(e=>e.rating.kp>MIN_RATING_KP)},setPageType:function(e){this.state.pageType=e,this.saveToLocalStorage()},saveToLocalStorage:function(){localStorage.setItem(LOCAL_STORAGE_APP_STATE_KEY,JSON.stringify(this.state))},initStateFromLocalStorage:function(){localStorage.getItem(LOCAL_STORAGE_APP_STATE_KEY)&&(this.state=JSON.parse(localStorage.getItem(LOCAL_STORAGE_APP_STATE_KEY)))},updateMoviesList:function(e){this.state.moviesList=e,this.saveToLocalStorage()},updateMovieInfo:function(e){e.id?this.state.movie={poster:e.poster?.url,name:e.name,year:e.year,alternativeName:e.alternativeName,ageRating:e.ageRating,shortDescription:e.shortDescription,countryName:e.countries[0]?.name,genres:e.genres,movieLength:e.movieLength,ratingKp:e.rating?.kp,votesKp:e.votes?.kp,filmCritics:e.votes?.filmCritics,description:e.description,idMovie:e.id,selectedTrailer:e.videos?.trailers[0]||null,isSerial:e.isSeries,seriesLength:e.seriesLength,trailers:e.videos?.trailers||null,persons:e.persons||null,sequelsAndPrequels:e.sequelsAndPrequels||null,similarMovies:e.similarMovies||null}:this.state.movie=e,this.saveToLocalStorage()},getSelectedTrailerUrl:function(){const e=this.state.movie.trailers,t=this.state.movie.selectedTrailer;if(!Array.isArray(e)||!t)return null;let i=e.find(e=>e.url===t.url);return i?i?.url:null},changeCurrentFavoriteMovie:function(){this.isFavoriteMovie()?this.state.favoritesMovieList=this.state.favoritesMovieList.filter(e=>e.idMovie!==this.state.movie.idMovie):this.state.favoritesMovieList.push({...this.state.movie}),this.saveToLocalStorage()},setSelectedVideoPlayer:function(e){this.state.movie.selectedTrailer=this.state.movie.trailers.find(t=>t.name===e)},isFavoriteMovie:function(){return this.state.favoritesMovieList.some(e=>e.idMovie===this.state.movie.idMovie)},setIsLoadedListVisible:function(e){this.state.isLoadedListVisible=e},setSideBarFilter:function(e){this.state.sideBarFilter={...this.state.sideBarFilter,...e},this.saveToLocalStorage()},setIsLoading:function(e){this.state.isLoading=e},setPagesQuantity:function(e){this.state.pagination.pages=e},setPageNumber:function(e){this.state.pagination.chosenPage=Number(e)}};function getYearsArray(){let e=[],t=(new Date).getFullYear();for(;t>START_YEAR;)e.push(t.toString()),t--;return e}export{Store};